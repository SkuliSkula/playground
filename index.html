<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Skúli´s Playground</title>
    <script type="text/javascript" src="scripts/d3.js"></script>
    <link rel="stylesheet" href="styles/styles.css"> </head>

<body>
    <script type="text/javascript">
        var svg = d3.select("body").append("svg").attr("width", 500).attr("height", 500);
        var xScale = d3.scale.log().range([0, 250]);
        var yScale = d3.scale.log().range([0, 250]);
        
        function render(data) {
            xScale.domain(d3.extent(data, function (d){ return d.geo.lat; }));
            yScale.domain(d3.extent(data, function (d){ return d.geo.lon; }));
            var circles = svg.selectAll("circle").data(data);
            circles.enter().append("circle").attr("r", 5);
            circles
            .attr("cx", function (d){ return xScale(d.geo.lat); })
            .attr("cy", function (d){ return yScale(d.geo.lon); });
            circles.exit().remove();
        }
        
        d3.json('http://apis.is/petrol', function(data) {
            render(data.results);
        });

    </script>
</body>

</html>